<UserControl x:Class="WinTodoNag.Views.TaskListView"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">
<DockPanel>
<ToolBar DockPanel.Dock="Top">
<Button Content="New Task" Command="{Binding NewTaskCommand}" />
<Separator />
<TextBlock Text="Sorted by next notification" Margin="8,0,0,0"/>
</ToolBar>
<TreeView ItemsSource="{Binding Tasks}">
<TreeView.ItemTemplate>
<HierarchicalDataTemplate ItemsSource="{Binding Subtasks}">
<StackPanel Orientation="Horizontal" Margin="2">
<CheckBox IsChecked="{Binding IsCompleted, Mode=TwoWay}"/>
<TextBlock Text="{Binding Title}" Margin="6,0,0,0"/>
<TextBlock Text=" • " />
<TextBlock Text="{Binding NextNotificationAt, StringFormat=next: {0:yyyy-MM-dd HH:mm}}"/>
<TextBlock Text=" • "/>
<TextBlock Text="{Binding NotificationMode}"/>
<Button Content="Snooze" Command="{Binding DataContext.SnoozeTaskCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" Margin="8,0,0,0"/>
<Button Content="Edit" Command="{Binding DataContext.EditTaskCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" Margin="4,0,0,0"/>
</StackPanel>
</HierarchicalDataTemplate>
</TreeView.ItemTemplate>
</TreeView>
</DockPanel>
</UserControl>